import{q as _,d as r,o as l,a as e,e as y,E as F,F as w,h as S,t as n,r as f,k as I,O,L as H,c as b,w as j,g as K,b as P,j as z,P as q}from"./app-CoGxkfVc.js";import{_ as U}from"./AppLayout-Drc7lzl4.js";import L from"./GameCard-DQWTkmnL.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"shot-chart bg-white p-6 rounded-lg shadow"},Z={class:"relative"},J={viewBox:"0 0 500 470",class:"w-full max-w-lg mx-auto border rounded-lg bg-orange-50",style:{"aspect-ratio":"500/470"}},R={key:0},X=["cx","cy","r","fill","stroke","onClick"],Y={key:0,class:"mt-6 grid grid-cols-2 gap-4"},ee={class:"text-center"},te={class:"text-2xl font-bold text-green-600"},se={class:"text-center"},ae={class:"text-2xl font-bold text-red-600"},le={key:1,class:"mt-4 text-center"},oe={class:"text-lg font-semibold text-gray-900"},re={class:"text-sm text-gray-600"},ie={__name:"ShotChart",props:{shots:{type:Array,default:()=>[]},playerId:{type:Number,default:null},gameId:{type:Number,default:null}},emits:["shot-selected"],setup(x,{emit:C}){const c=x,u=C,i=_(()=>{if(!c.shots||c.shots.length===0)return null;const g=c.shots.filter(h=>h.made).length,o=c.shots.filter(h=>!h.made).length,d=c.shots.length;return{made:g,missed:o,total:d}}),p=g=>{u("shot-selected",g)};return(g,o)=>(l(),r("div",W,[o[4]||(o[4]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Shot Chart ",-1)),e("div",Z,[(l(),r("svg",J,[o[0]||(o[0]=F('<rect width="500" height="470" fill="#fef7ed" stroke="#ea580c" stroke-width="2" data-v-378a2adb></rect><rect x="190" y="0" width="120" height="190" fill="none" stroke="#ea580c" stroke-width="2" data-v-378a2adb></rect><circle cx="250" cy="190" r="60" fill="none" stroke="#ea580c" stroke-width="2" data-v-378a2adb></circle><path d="M 50 100 Q 250 50, 450 100 L 450 470 L 50 470 Z" fill="none" stroke="#ea580c" stroke-width="2" data-v-378a2adb></path><circle cx="250" cy="50" r="15" fill="#dc2626" stroke="#991b1b" stroke-width="2" data-v-378a2adb></circle>',5)),x.shots&&x.shots.length?(l(),r("g",R,[(l(!0),r(w,null,S(x.shots,(d,h)=>(l(),r("circle",{key:h,cx:d.x,cy:d.y,r:d.made?6:4,fill:d.made?"#22c55e":"#ef4444",stroke:d.made?"#15803d":"#dc2626","stroke-width":"2",class:"cursor-pointer",onClick:G=>p(d)},null,8,X))),128))])):y("",!0),o[1]||(o[1]=F('<g transform="translate(20, 400)" data-v-378a2adb><circle cx="10" cy="10" r="6" fill="#22c55e" stroke="#15803d" stroke-width="2" data-v-378a2adb></circle><text x="25" y="15" class="text-xs fill-gray-700" data-v-378a2adb>Treffer</text><circle cx="10" cy="30" r="4" fill="#ef4444" stroke="#dc2626" stroke-width="2" data-v-378a2adb></circle><text x="25" y="35" class="text-xs fill-gray-700" data-v-378a2adb>Fehlwurf</text></g>',1))]))]),i.value?(l(),r("div",Y,[e("div",ee,[e("div",te,n(i.value.made),1),o[2]||(o[2]=e("div",{class:"text-sm text-gray-600"},"Treffer",-1))]),e("div",se,[e("div",ae,n(i.value.missed),1),o[3]||(o[3]=e("div",{class:"text-sm text-gray-600"},"FehlwÃ¼rfe",-1))])])):y("",!0),i.value&&i.value.total>0?(l(),r("div",le,[e("div",oe,n(Math.round(i.value.made/i.value.total*100))+"% Trefferquote ",1),e("div",re,n(i.value.made)+" / "+n(i.value.total)+" WÃ¼rfe ",1)])):y("",!0)]))}},de=Q(ie,[["__scopeId","data-v-378a2adb"]]),ne={class:"py-12"},ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},ue={key:0,class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},ge={class:"p-6 lg:p-8"},he={class:"flex items-center justify-between mb-6"},me={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},ve={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},xe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},fe={class:"p-6 lg:p-8"},ye={class:"flex items-center justify-between mb-6"},pe=["disabled"],_e={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ke={key:0,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},be={key:1,class:"text-center py-12"},we={key:1,class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},Se={class:"p-6 lg:p-8"},Ce={class:"flex items-center justify-between mb-6"},Ge={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},$e={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},De={class:"p-6 lg:p-8"},Ve={key:0,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},Te={key:1,class:"text-center py-12"},Le={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},Be={class:"p-6 lg:p-8"},Me={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Fe={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},je={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},ze={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Ee={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Ne={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Ae={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Ie={class:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg"},Oe={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Ue={__name:"Dashboard",props:{games:Array},setup(x){const C=x,c=f(!1),u=f(C.games||[]),i=f(null),p=f(null),g=f(null),o=f([]),d=_(()=>u.value.filter(s=>["live","halftime","overtime"].includes(s.status))),h=_(()=>{const s=new Date().toISOString().split("T")[0];return u.value.filter(t=>{const a=new Date(t.scheduled_at).toISOString().split("T")[0];return t.status==="scheduled"&&a>=s}).slice(0,12)}),G=_(()=>u.value.filter(s=>s.status==="finished").sort((s,t)=>new Date(t.actual_end_time)-new Date(s.actual_end_time)).slice(0,9)),k=_(()=>{const s=new Date().toISOString().split("T")[0],t=u.value.filter(v=>new Date(v.scheduled_at).toISOString().split("T")[0]===s),a=t.filter(v=>v.status==="finished"),m=a.reduce((v,T)=>v+(T.home_team_score||0)+(T.away_team_score||0),0);return{totalGamesToday:t.length,liveGames:d.value.length,finishedGames:a.length,averageScore:a.length>0?Math.round(m/a.length):0}});let B=null;const $=async()=>{c.value=!0;try{z.reload({only:["games"]})}catch(s){console.error("Error refreshing games:",s)}c.value=!1},M=s=>{z.get(route("games.live-scoring",s.id))},D=s=>{console.log("View game details:",s)},V=async(s,t=null,a=null)=>{i.value=s,p.value=t,g.value=a,await N(s.id,t,a)},E=()=>{i.value=null,p.value=null,g.value=null,o.value=[]},N=async(s,t=null,a=null)=>{try{const m={};t&&(m.player_id=t),a&&(m.team_id=a);const v=await q.get(`/api/v2/games/${s}/shot-chart`,{params:m});o.value=v.data.shots||[]}catch(m){console.error("Error loading shot chart data:",m),o.value=[]}},A=s=>{console.log("Shot selected:",s)};return I(()=>{B=O({onGameStarted:s=>{console.log("Game started in dashboard:",s),$()},onGameFinished:s=>{console.log("Game finished in dashboard:",s),$()},onScoreUpdated:s=>{console.log("Score updated in dashboard:",s);const t=u.value.findIndex(a=>a.id===s.game_id);t!==-1&&s.liveGame&&(u.value[t].home_team_score=s.liveGame.current_score_home,u.value[t].away_team_score=s.liveGame.current_score_away)}})}),H(()=>{B&&window.Echo.leaveChannel("live-games")}),(s,t)=>(l(),b(U,{title:"Games Dashboard"},{header:j(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Games Dashboard ",-1)])),default:j(()=>[e("div",ne,[e("div",ce,[d.value.length>0?(l(),r("div",ue,[e("div",ge,[e("div",he,[e("h3",me," ðŸ”´ Live Spiele ("+n(d.value.length)+") ",1),t[1]||(t[1]=e("div",{class:"flex items-center text-red-600 dark:text-red-400"},[e("div",{class:"w-2 h-2 bg-red-600 rounded-full animate-pulse mr-2"}),e("span",{class:"text-sm font-medium"},"Live")],-1))]),e("div",ve,[(l(!0),r(w,null,S(d.value,a=>(l(),b(L,{key:`live-${a.id}`,game:a,"is-live":!0,onViewLiveScoring:M,onViewDetails:D,onViewShotChart:V},null,8,["game"]))),128))])])])):y("",!0),e("div",xe,[e("div",fe,[e("div",ye,[t[3]||(t[3]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," ðŸ“… Heute & Bald ",-1)),e("button",{onClick:$,disabled:c.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center"},[c.value?(l(),r("svg",_e,t[2]||(t[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):y("",!0),K(" "+n(c.value?"Aktualisiere...":"ðŸ”„ Aktualisieren"),1)],8,pe)]),h.value.length>0?(l(),r("div",ke,[(l(!0),r(w,null,S(h.value,a=>(l(),b(L,{key:`upcoming-${a.id}`,game:a,"is-live":!1,onViewLiveScoring:M,onViewDetails:D,onViewShotChart:V},null,8,["game"]))),128))])):(l(),r("div",be,t[4]||(t[4]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4m-9 4h10m-5-4v8m0 0l-3-3m3 3l3-3"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"Keine Spiele heute",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Es sind keine Spiele fÃ¼r heute geplant. ",-1)])))])]),i.value?(l(),r("div",we,[e("div",Se,[e("div",Ce,[e("h3",Ge," ðŸŽ¯ Shot Chart - "+n(i.value.home_team?.name)+" vs "+n(i.value.away_team?.name),1),e("button",{onClick:E,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P(de,{"game-actions":o.value,"player-id":p.value,"team-id":g.value,realtime:i.value.status==="live",onShotSelected:A},null,8,["game-actions","player-id","team-id","realtime"])])])):y("",!0),e("div",$e,[e("div",De,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6"}," ðŸ“ˆ KÃ¼rzlich beendet ",-1)),G.value.length>0?(l(),r("div",Ve,[(l(!0),r(w,null,S(G.value,a=>(l(),b(L,{key:`recent-${a.id}`,game:a,"is-finished":!0,onViewDetails:D,onViewShotChart:V},null,8,["game"]))),128))])):(l(),r("div",Te,t[6]||(t[6]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"Keine kÃ¼rzlichen Spiele",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Es gibt keine kÃ¼rzlich beendeten Spiele. ",-1)])))])]),e("div",Le,[e("div",Be,[t[12]||(t[12]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6"}," ðŸ“Š Heute im Ãœberblick ",-1)),e("div",Me,[e("div",Fe,[e("div",je,n(k.value.totalGamesToday),1),t[8]||(t[8]=e("div",{class:"text-sm text-blue-800 dark:text-blue-300"}," Spiele heute ",-1))]),e("div",ze,[e("div",Ee,n(k.value.liveGames),1),t[9]||(t[9]=e("div",{class:"text-sm text-green-800 dark:text-green-300"}," Live Spiele ",-1))]),e("div",Ne,[e("div",Ae,n(k.value.finishedGames),1),t[10]||(t[10]=e("div",{class:"text-sm text-purple-800 dark:text-purple-300"}," Beendet ",-1))]),e("div",Ie,[e("div",Oe,n(k.value.averageScore),1),t[11]||(t[11]=e("div",{class:"text-sm text-orange-800 dark:text-orange-300"}," âŒ€ Punkte/Spiel ",-1))])])])])])])]),_:1}))}};export{Ue as default};
