import{u as V,r as L,q,c as x,o as g,w as r,a as l,b as o,i as F,d as v,e as h,g as f,t as c,m as y,f as a,F as k,h as S,p as w,z as M,n as U}from"./app-CoGxkfVc.js";import{_ as G}from"./AppLayout-Drc7lzl4.js";import{_ as N}from"./PrimaryButton-CwuCmxQ7.js";import{_ as $}from"./SecondaryButton-Bp3bKgLC.js";import{_ as B}from"./DangerButton-w_lFmDA2.js";import{_ as p}from"./TextInput-BJ5pfwEC.js";import{_ as i}from"./InputLabel-C_RcxF_l.js";import{_ as u}from"./InputError-o9U-HAWP.js";import{_ as j}from"./ConfirmationModal-D0eLXsmy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CLjYKrsc.js";const O={class:"flex justify-between items-center"},E={class:"font-semibold text-xl text-gray-800 leading-tight"},H={class:"py-12"},I={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},P={key:0,class:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md"},R={class:"text-sm text-yellow-800"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K=["disabled"],Q=["value"],W=["disabled"],X=["value"],Y={key:0},ee={class:"flex items-center gap-2 mt-1"},se={class:"md:col-span-2"},le={class:"flex items-center justify-between mt-6"},ce={__name:"Edit",props:{game:Object,teams:Array,can:Object},setup(d){const n=d;function T(m){if(!m)return"";const e=new Date(m);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,16)}const s=V({home_team_id:n.game.home_team_id||"",away_team_id:n.game.away_team_id||"",scheduled_at:T(n.game.scheduled_at),location:n.game.location||"",game_type:n.game.game_type||"league",season:n.game.season||"",league:n.game.league||"",round:n.game.round||"",status:n.game.status||"scheduled",home_score:n.game.home_score||0,away_score:n.game.away_score||0,notes:n.game.notes||""}),_=V({}),b=L(!1),z=q(()=>s.home_team_id?n.teams.filter(m=>m.id!==s.home_team_id):n.teams);function A(m){return{scheduled:"Geplant",live:"Live",finished:"Beendet",cancelled:"Abgesagt",postponed:"Verschoben"}[m]||m}const C=()=>{s.put(route("games.update",n.game.id))},D=()=>{_.delete(route("games.destroy",n.game.id))};return(m,e)=>(g(),x(G,{title:"Spiel bearbeiten"},{header:r(()=>[l("div",O,[l("h2",E," Spiel bearbeiten: "+c(d.game.homeTeam.name)+" vs "+c(d.game.awayTeam.name),1),o($,{href:m.route("games.show",d.game.id),as:"Link"},{default:r(()=>e[15]||(e[15]=[f(" Zurück ",-1)])),_:1,__:[15]},8,["href"])])]),default:r(()=>[l("div",H,[l("div",I,[l("div",Z,[l("form",{onSubmit:F(C,["prevent"]),class:"p-6"},[d.game.status!=="scheduled"?(g(),v("div",P,[l("p",R,[e[16]||(e[16]=l("strong",null,"Hinweis:",-1)),f(' Dieses Spiel hat den Status "'+c(A(d.game.status))+'". Änderungen sind nur eingeschränkt möglich. ',1)])])):h("",!0),l("div",J,[l("div",null,[o(i,{for:"home_team_id",value:"Heimteam*"}),y(l("select",{id:"home_team_id","onUpdate:modelValue":e[0]||(e[0]=t=>a(s).home_team_id=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",required:"",disabled:d.game.status!=="scheduled"},[e[17]||(e[17]=l("option",{value:""},"Team auswählen",-1)),(g(!0),v(k,null,S(d.teams,t=>(g(),v("option",{key:t.id,value:t.id},c(t.name)+" ("+c(t.club.name)+") ",9,Q))),128))],8,K),[[w,a(s).home_team_id]]),o(u,{message:a(s).errors.home_team_id,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"away_team_id",value:"Auswärtsteam*"}),y(l("select",{id:"away_team_id","onUpdate:modelValue":e[1]||(e[1]=t=>a(s).away_team_id=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",required:"",disabled:d.game.status!=="scheduled"},[e[18]||(e[18]=l("option",{value:""},"Team auswählen",-1)),(g(!0),v(k,null,S(z.value,t=>(g(),v("option",{key:t.id,value:t.id},c(t.name)+" ("+c(t.club.name)+") ",9,X))),128))],8,W),[[w,a(s).away_team_id]]),o(u,{message:a(s).errors.away_team_id,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"scheduled_at",value:"Datum und Uhrzeit*"}),o(p,{id:"scheduled_at",modelValue:a(s).scheduled_at,"onUpdate:modelValue":e[2]||(e[2]=t=>a(s).scheduled_at=t),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(u,{message:a(s).errors.scheduled_at,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"location",value:"Spielort"}),o(p,{id:"location",modelValue:a(s).location,"onUpdate:modelValue":e[3]||(e[3]=t=>a(s).location=t),type:"text",class:"mt-1 block w-full",placeholder:"z.B. Sporthalle Am Stadtpark"},null,8,["modelValue"]),o(u,{message:a(s).errors.location,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"game_type",value:"Spieltyp*"}),y(l("select",{id:"game_type","onUpdate:modelValue":e[4]||(e[4]=t=>a(s).game_type=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",required:""},e[19]||(e[19]=[l("option",{value:"league"},"Liga",-1),l("option",{value:"friendly"},"Freundschaftsspiel",-1),l("option",{value:"playoff"},"Playoff",-1),l("option",{value:"tournament"},"Turnier",-1)]),512),[[w,a(s).game_type]]),o(u,{message:a(s).errors.game_type,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"season",value:"Saison*"}),o(p,{id:"season",modelValue:a(s).season,"onUpdate:modelValue":e[5]||(e[5]=t=>a(s).season=t),type:"text",class:"mt-1 block w-full",placeholder:"2023/2024",maxlength:"9",required:""},null,8,["modelValue"]),o(u,{message:a(s).errors.season,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"league",value:"Liga"}),o(p,{id:"league",modelValue:a(s).league,"onUpdate:modelValue":e[6]||(e[6]=t=>a(s).league=t),type:"text",class:"mt-1 block w-full",placeholder:"z.B. Bezirksliga"},null,8,["modelValue"]),o(u,{message:a(s).errors.league,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"round",value:"Spieltag/Runde"}),o(p,{id:"round",modelValue:a(s).round,"onUpdate:modelValue":e[7]||(e[7]=t=>a(s).round=t),type:"text",class:"mt-1 block w-full",placeholder:"z.B. 5. Spieltag"},null,8,["modelValue"]),o(u,{message:a(s).errors.round,class:"mt-2"},null,8,["message"])]),l("div",null,[o(i,{for:"status",value:"Status"}),y(l("select",{id:"status","onUpdate:modelValue":e[8]||(e[8]=t=>a(s).status=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},e[20]||(e[20]=[l("option",{value:"scheduled"},"Geplant",-1),l("option",{value:"live"},"Live",-1),l("option",{value:"finished"},"Beendet",-1),l("option",{value:"cancelled"},"Abgesagt",-1),l("option",{value:"postponed"},"Verschoben",-1)]),512),[[w,a(s).status]]),o(u,{message:a(s).errors.status,class:"mt-2"},null,8,["message"])]),d.game.status==="finished"?(g(),v("div",Y,[o(i,{value:"Endstand"}),l("div",ee,[o(p,{modelValue:a(s).home_score,"onUpdate:modelValue":e[9]||(e[9]=t=>a(s).home_score=t),type:"number",class:"w-20",min:"0",placeholder:"Heim"},null,8,["modelValue"]),e[21]||(e[21]=l("span",{class:"text-gray-500"},":",-1)),o(p,{modelValue:a(s).away_score,"onUpdate:modelValue":e[10]||(e[10]=t=>a(s).away_score=t),type:"number",class:"w-20",min:"0",placeholder:"Gast"},null,8,["modelValue"])])])):h("",!0),l("div",se,[o(i,{for:"notes",value:"Notizen"}),y(l("textarea",{id:"notes","onUpdate:modelValue":e[11]||(e[11]=t=>a(s).notes=t),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",maxlength:"1000"},null,512),[[M,a(s).notes]]),o(u,{message:a(s).errors.notes,class:"mt-2"},null,8,["message"]),e[22]||(e[22]=l("div",{class:"text-xs text-gray-500 mt-1"},"Max. 1000 Zeichen",-1))])]),l("div",le,[d.can?.delete&&d.game.status==="scheduled"?(g(),x(B,{key:0,type:"button",onClick:e[12]||(e[12]=t=>b.value=!0)},{default:r(()=>e[23]||(e[23]=[f(" Spiel löschen ",-1)])),_:1,__:[23]})):h("",!0),o(N,{class:U({"opacity-25":a(s).processing}),disabled:a(s).processing},{default:r(()=>e[24]||(e[24]=[f(" Änderungen speichern ",-1)])),_:1,__:[24]},8,["class","disabled"])])],32)])])]),o(j,{show:b.value,onClose:e[14]||(e[14]=t=>b.value=!1)},{title:r(()=>e[25]||(e[25]=[f(" Spiel löschen ",-1)])),content:r(()=>e[26]||(e[26]=[f(" Sind Sie sicher, dass Sie dieses Spiel löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden. ",-1)])),footer:r(()=>[o($,{onClick:e[13]||(e[13]=t=>b.value=!1)},{default:r(()=>e[27]||(e[27]=[f(" Abbrechen ",-1)])),_:1,__:[27]}),o(B,{class:U(["ml-3",{"opacity-25":a(_).processing}]),disabled:a(_).processing,onClick:D},{default:r(()=>e[28]||(e[28]=[f(" Spiel löschen ",-1)])),_:1,__:[28]},8,["class","disabled"])]),_:1},8,["show"])]),_:1}))}};export{ce as default};
