import{r,q as j,k as le,c as ne,o as i,w as u,b as d,g as a,a as e,d as o,e as m,n as N,m as E,p as I,t as n,F as V,h as B}from"./app-CoGxkfVc.js";import{_ as ae}from"./DialogModal-C0QVC45F.js";import{_ as $}from"./InputLabel-C_RcxF_l.js";import{_ as ie}from"./TextInput-BJ5pfwEC.js";import{_ as M}from"./PrimaryButton-CwuCmxQ7.js";import{_ as h}from"./SecondaryButton-Bp3bKgLC.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CLjYKrsc.js";const re={class:"space-y-6"},de={class:"border-b border-gray-200"},ue={class:"-mb-px flex space-x-8"},me={key:0,class:"space-y-4"},ge={class:"bg-gray-50 p-4 rounded-lg"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},ve={class:"flex items-center space-x-4"},pe={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fe={key:0,class:"space-y-3"},xe={class:"text-lg font-medium text-gray-900"},ye={class:"grid gap-4"},be={class:"flex items-center justify-between"},_e={class:"flex-1"},ke={class:"flex items-center space-x-3"},we={class:"flex-1 min-w-0"},he={class:"flex items-center space-x-2"},Le={class:"text-lg font-medium text-gray-900"},Ce={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Re={class:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2 text-sm text-gray-500"},Se={key:0,class:"mt-2 text-sm text-gray-600"},Te={class:"flex flex-col space-y-2"},Ne={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},De={class:"space-y-3"},Ae={class:"text-sm space-y-1"},ze={class:"space-y-3"},Ve={class:"text-sm space-y-1"},Be={key:0,class:"mt-4"},$e={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Oe={key:0,class:"flex justify-center space-x-2 mt-4"},Pe=["disabled"],Fe={class:"px-3 py-1 text-sm text-gray-500"},je=["disabled"],Ee={key:1,class:"text-center py-8"},Ie={key:1,class:"space-y-4"},Ke={class:"flex justify-between items-center"},qe={key:0,class:"space-y-3"},He={class:"flex items-center justify-between"},Ue={class:"flex-1"},We={class:"flex items-center space-x-3"},Ge={class:"flex-1 min-w-0"},Ze={class:"flex items-center space-x-2"},Je={class:"text-lg font-medium text-gray-900"},Qe={class:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2 text-sm text-gray-500"},Xe={class:"flex space-x-2"},Ye=["onClick"],es={key:1,class:"text-center py-8"},ss={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},ts={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},ls={class:"text-sm text-gray-500 mb-4"},ns={class:"text-sm text-gray-700 space-y-1 mb-4"},as={class:"flex justify-end space-x-3"},is={__name:"LeagueManagementModal",props:{show:Boolean},emits:["close","leagueRegistered"],setup(K,{emit:q}){const O=q,p=r("browse"),y=r(""),b=r(""),_=r(""),c=r([]),f=r([]),L=r(null),C=r(!1),R=r(!1),D=r(!1),S=r(!1),v=r(null),k=r(null),A=r(!1),g=r(1),T=r(5),H=j(()=>{const l=(g.value-1)*T.value,s=l+T.value;return c.value.slice(l,s)}),z=j(()=>Math.ceil(c.value.length/T.value));le(()=>{P()});const P=()=>{c.value=[{id:1,name:"Regionalliga Nord",level:"regional",region:"Nord",season:"2024/25",currentTeams:12,maxTeams:14,registrationOpen:!0,registrationDeadline:"2024-09-15",seasonStart:"2024-10-01",seasonEnd:"2025-04-30",description:"Die höchste Regionalliga im Norden Deutschlands",registrationFee:"€500",minPlayers:10,maxForeigners:2,licenseRequired:!0},{id:2,name:"Oberliga West",level:"oberliga",region:"West",season:"2024/25",currentTeams:16,maxTeams:16,registrationOpen:!1,registrationDeadline:"2024-08-31",seasonStart:"2024-09-15",seasonEnd:"2025-03-31",description:"Oberliga für den westlichen Bereich",registrationFee:"€300",minPlayers:8,maxForeigners:1,licenseRequired:!0}],f.value=[{id:1,teamName:"Mein Basketball Team",leagueName:"Regionalliga Nord",season:"2024/25",status:"pending",registeredAt:"2024-08-10",playerCount:12,maxPlayers:15}]},U=async()=>{R.value=!0,C.value=!1;try{let l=c.value;y.value&&(l=l.filter(s=>s.name.toLowerCase().includes(y.value.toLowerCase()))),b.value&&(l=l.filter(s=>s.level===b.value)),_.value&&(l=l.filter(s=>s.region.toLowerCase()===_.value.toLowerCase())),c.value=l,C.value=!0,g.value=1}catch(l){console.error("League search failed:",l)}finally{R.value=!1}},W=()=>{y.value="",b.value="",_.value="",P(),g.value=1,C.value=!1},G=l=>{v.value=l,k.value={name:"Mein Basketball Team"},S.value=!0},Z=async()=>{A.value=!0;try{f.value.unshift({id:Date.now(),teamName:k.value.name,leagueName:v.value.name,season:v.value.season,status:"pending",registeredAt:new Date().toISOString(),playerCount:12,maxPlayers:15}),O("leagueRegistered",{league:v.value,team:k.value}),S.value=!1,p.value="registered"}catch(l){console.error("Registration failed:",l)}finally{A.value=!1}},J=()=>{S.value=!1,v.value=null,k.value=null},Q=l=>{L.value=L.value===l.id?null:l.id},X=l=>{console.log("View registration details:",l)},Y=async l=>{if(confirm("Möchten Sie diese Registrierung wirklich stornieren?"))try{const s=f.value.findIndex(t=>t.id===l.id);s>-1&&f.value.splice(s,1)}catch(s){console.error("Cancellation failed:",s)}},ee=async()=>{D.value=!0,D.value=!1},F=()=>{p.value="browse",L.value=null,O("close")},w=l=>l?new Date(l).toLocaleDateString("de-DE"):"N/A",se=l=>({1:"1. Liga",2:"2. Liga",regional:"Regionalliga",oberliga:"Oberliga",landesliga:"Landesliga",bezirksliga:"Bezirksliga"})[l]||l,te=l=>({pending:"Ausstehend",approved:"Genehmigt",rejected:"Abgelehnt",cancelled:"Storniert"})[l]||l;return(l,s)=>(i(),ne(ae,{show:K.show,onClose:F,"max-width":"5xl"},{title:u(()=>s[7]||(s[7]=[a(" Liga-Verwaltung & Registrierung ",-1)])),content:u(()=>[e("div",re,[e("div",de,[e("nav",ue,[e("button",{onClick:s[0]||(s[0]=t=>p.value="browse"),class:N([p.value==="browse"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])}," Verfügbare Ligen ",2),e("button",{onClick:s[1]||(s[1]=t=>p.value="registered"),class:N([p.value==="registered"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])}," Registrierte Teams ",2)])]),p.value==="browse"?(i(),o("div",me,[e("div",ge,[e("div",ce,[e("div",null,[d($,{for:"league_search",value:"Liga-Name suchen"}),d(ie,{id:"league_search",modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=t=>y.value=t),type:"text",class:"mt-1 block w-full",placeholder:"z.B. Regionalliga Nord"},null,8,["modelValue"])]),e("div",null,[d($,{for:"league_level",value:"Liga-Ebene"}),E(e("select",{id:"league_level","onUpdate:modelValue":s[3]||(s[3]=t=>b.value=t),class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},s[8]||(s[8]=[e("option",{value:""},"Alle Ebenen",-1),e("option",{value:"1"},"1. Liga",-1),e("option",{value:"2"},"2. Liga",-1),e("option",{value:"regional"},"Regionalliga",-1),e("option",{value:"oberliga"},"Oberliga",-1),e("option",{value:"landesliga"},"Landesliga",-1),e("option",{value:"bezirksliga"},"Bezirksliga",-1)]),512),[[I,b.value]])]),e("div",null,[d($,{for:"league_region",value:"Region"}),E(e("select",{id:"league_region","onUpdate:modelValue":s[4]||(s[4]=t=>_.value=t),class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},s[9]||(s[9]=[e("option",{value:""},"Alle Regionen",-1),e("option",{value:"nord"},"Nord",-1),e("option",{value:"sued"},"Süd",-1),e("option",{value:"ost"},"Ost",-1),e("option",{value:"west"},"West",-1),e("option",{value:"nordost"},"Nordost",-1),e("option",{value:"suedwest"},"Südwest",-1)]),512),[[I,_.value]])])]),e("div",ve,[d(M,{onClick:U,disabled:R.value},{default:u(()=>[R.value?(i(),o("svg",pe,s[10]||(s[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),s[11]||(s[11]=a(" Ligen suchen ",-1))]),_:1,__:[11]},8,["disabled"]),d(h,{onClick:W},{default:u(()=>s[12]||(s[12]=[a(" Zurücksetzen ",-1)])),_:1,__:[12]})])]),c.value.length>0?(i(),o("div",fe,[e("h4",xe,"Verfügbare Ligen ("+n(c.value.length)+")",1),e("div",ye,[(i(!0),o(V,null,B(H.value,t=>(i(),o("div",{key:t.id,class:"border rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",be,[e("div",_e,[e("div",ke,[e("div",we,[e("div",he,[e("h3",Le,n(t.name),1),e("span",{class:N(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.level==="1"?"bg-gold-100 text-gold-800":t.level==="2"?"bg-silver-100 text-silver-800":"bg-blue-100 text-blue-800"])},n(se(t.level)),3),t.registrationOpen?(i(),o("span",Ce," Anmeldung offen ")):m("",!0)]),e("div",Re,[e("div",null,[s[13]||(s[13]=e("span",{class:"font-medium"},"Saison:",-1)),a(" "+n(t.season),1)]),e("div",null,[s[14]||(s[14]=e("span",{class:"font-medium"},"Region:",-1)),a(" "+n(t.region),1)]),e("div",null,[s[15]||(s[15]=e("span",{class:"font-medium"},"Teams:",-1)),a(" "+n(t.currentTeams)+"/"+n(t.maxTeams),1)]),e("div",null,[s[16]||(s[16]=e("span",{class:"font-medium"},"Anmeldeschluss:",-1)),a(" "+n(w(t.registrationDeadline)),1)])]),t.description?(i(),o("div",Se,n(t.description),1)):m("",!0)])])]),e("div",Te,[d(M,{onClick:x=>G(t),disabled:!t.registrationOpen||t.currentTeams>=t.maxTeams,size:"sm"},{default:u(()=>[a(n(t.registrationOpen?"Registrieren":"Geschlossen"),1)]),_:2},1032,["onClick","disabled"]),d(h,{onClick:x=>Q(t),size:"sm"},{default:u(()=>s[17]||(s[17]=[a(" Details ",-1)])),_:2,__:[17]},1032,["onClick"])])]),L.value===t.id?(i(),o("div",Ne,[e("div",Me,[e("div",De,[s[22]||(s[22]=e("h5",{class:"font-medium text-gray-900"},"Liga-Informationen",-1)),e("div",Ae,[e("p",null,[s[18]||(s[18]=e("span",{class:"font-medium"},"Spielmodus:",-1)),a(" "+n(t.gameMode||"Reguläre Saison + Playoffs"),1)]),e("p",null,[s[19]||(s[19]=e("span",{class:"font-medium"},"Spieltage:",-1)),a(" "+n(t.gamedays||"N/A"),1)]),e("p",null,[s[20]||(s[20]=e("span",{class:"font-medium"},"Startdatum:",-1)),a(" "+n(w(t.seasonStart)),1)]),e("p",null,[s[21]||(s[21]=e("span",{class:"font-medium"},"Enddatum:",-1)),a(" "+n(w(t.seasonEnd)),1)])])]),e("div",ze,[s[27]||(s[27]=e("h5",{class:"font-medium text-gray-900"},"Anforderungen & Kosten",-1)),e("div",Ve,[e("p",null,[s[23]||(s[23]=e("span",{class:"font-medium"},"Teilnahmegebühr:",-1)),a(" "+n(t.registrationFee||"Kostenlos"),1)]),e("p",null,[s[24]||(s[24]=e("span",{class:"font-medium"},"Min. Spieleranzahl:",-1)),a(" "+n(t.minPlayers||"8"),1)]),e("p",null,[s[25]||(s[25]=e("span",{class:"font-medium"},"Max. Ausländer:",-1)),a(" "+n(t.maxForeigners||"Unbegrenzt"),1)]),e("p",null,[s[26]||(s[26]=e("span",{class:"font-medium"},"Lizenzpflicht:",-1)),a(" "+n(t.licenseRequired?"Ja":"Nein"),1)])])])]),t.currentTeamsList&&t.currentTeamsList.length>0?(i(),o("div",Be,[s[28]||(s[28]=e("h5",{class:"font-medium text-gray-900 mb-2"},"Aktuell registrierte Teams",-1)),e("div",$e,[(i(!0),o(V,null,B(t.currentTeamsList,x=>(i(),o("div",{key:x.id,class:"text-sm text-gray-600 bg-gray-100 rounded px-2 py-1"},n(x.name),1))),128))])])):m("",!0)])):m("",!0)]))),128))]),c.value.length>T.value?(i(),o("div",Oe,[e("button",{onClick:s[5]||(s[5]=t=>g.value>1&&g.value--),disabled:g.value===1,class:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Zurück ",8,Pe),e("span",Fe," Seite "+n(g.value)+" von "+n(z.value),1),e("button",{onClick:s[6]||(s[6]=t=>g.value<z.value&&g.value++),disabled:g.value===z.value,class:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Weiter ",8,je)])):m("",!0)])):m("",!0),C.value&&c.value.length===0?(i(),o("div",Ee,s[29]||(s[29]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Keine Ligen gefunden",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Keine Ligen entsprechen den aktuellen Suchkriterien.",-1)]))):m("",!0)])):m("",!0),p.value==="registered"?(i(),o("div",Ie,[e("div",Ke,[s[31]||(s[31]=e("h4",{class:"text-lg font-medium text-gray-900"},"Registrierte Teams",-1)),d(M,{onClick:ee,disabled:D.value},{default:u(()=>s[30]||(s[30]=[a(" Aktualisieren ",-1)])),_:1,__:[30]},8,["disabled"])]),f.value.length>0?(i(),o("div",qe,[(i(!0),o(V,null,B(f.value,t=>(i(),o("div",{key:t.id,class:"border rounded-lg p-4"},[e("div",He,[e("div",Ue,[e("div",We,[e("div",Ge,[e("div",Ze,[e("h3",Je,n(t.teamName),1),e("span",{class:N(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.status==="approved"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},n(te(t.status)),3)]),e("div",Qe,[e("div",null,[s[32]||(s[32]=e("span",{class:"font-medium"},"Liga:",-1)),a(" "+n(t.leagueName),1)]),e("div",null,[s[33]||(s[33]=e("span",{class:"font-medium"},"Registriert:",-1)),a(" "+n(w(t.registeredAt)),1)]),e("div",null,[s[34]||(s[34]=e("span",{class:"font-medium"},"Saison:",-1)),a(" "+n(t.season),1)]),e("div",null,[s[35]||(s[35]=e("span",{class:"font-medium"},"Spieler:",-1)),a(" "+n(t.playerCount)+"/"+n(t.maxPlayers),1)])])])])]),e("div",Xe,[d(h,{onClick:x=>X(t),size:"sm"},{default:u(()=>s[36]||(s[36]=[a(" Details ",-1)])),_:2,__:[36]},1032,["onClick"]),t.status==="pending"?(i(),o("button",{key:0,onClick:x=>Y(t),class:"px-3 py-1 text-sm text-red-600 hover:text-red-800 border border-red-300 rounded-md hover:bg-red-50"}," Stornieren ",8,Ye)):m("",!0)])])]))),128))])):(i(),o("div",es,s[37]||(s[37]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Keine Registrierungen",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Bisher wurden keine Teams für Ligen registriert.",-1)])))])):m("",!0),S.value?(i(),o("div",ss,[e("div",ts,[s[43]||(s[43]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Liga-Registrierung bestätigen",-1)),e("p",ls,' Möchten Sie Ihr Team "'+n(k.value?.name)+'" für die Liga "'+n(v.value?.name)+'" registrieren? ',1),e("div",ns,[e("p",null,[s[38]||(s[38]=e("span",{class:"font-medium"},"Saison:",-1)),a(" "+n(v.value?.season),1)]),e("p",null,[s[39]||(s[39]=e("span",{class:"font-medium"},"Teilnahmegebühr:",-1)),a(" "+n(v.value?.registrationFee||"Kostenlos"),1)]),e("p",null,[s[40]||(s[40]=e("span",{class:"font-medium"},"Anmeldeschluss:",-1)),a(" "+n(w(v.value?.registrationDeadline)),1)])]),e("div",as,[d(h,{onClick:J},{default:u(()=>s[41]||(s[41]=[a(" Abbrechen ",-1)])),_:1,__:[41]}),d(M,{onClick:Z,disabled:A.value},{default:u(()=>s[42]||(s[42]=[a(" Registrieren ",-1)])),_:1,__:[42]},8,["disabled"])])])])):m("",!0)])]),footer:u(()=>[d(h,{onClick:F},{default:u(()=>s[44]||(s[44]=[a(" Schließen ",-1)])),_:1,__:[44]})]),_:1},8,["show"]))}},ps=oe(is,[["__scopeId","data-v-e3e855b1"]]);export{ps as default};
