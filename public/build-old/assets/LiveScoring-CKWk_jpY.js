import{r as y,q as k,k as P,Q as j,L as V,R as N,c as D,o as r,w,a as t,d,e as u,t as i,F as G,b as p,h as O,j as c}from"./app-CoGxkfVc.js";import{_ as U}from"./AppLayout-Drc7lzl4.js";import A from"./ScoringPanel-C_ye6Gba.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},z={class:"py-6"},I={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-6"},Q={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},q={class:"p-6 lg:p-8"},K={class:"flex justify-between items-center"},M={class:"flex space-x-6"},H={class:"text-center"},J={class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},X={class:"text-sm text-gray-600 dark:text-gray-400"},Y={class:"text-center"},Z={class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},ee={class:"text-sm text-gray-600 dark:text-gray-400"},te={class:"text-center"},ae={class:"text-2xl font-mono font-bold text-gray-900 dark:text-gray-100"},oe={class:"text-sm text-gray-600 dark:text-gray-400"},se={class:"text-xs text-gray-500 dark:text-gray-500"},ie={class:"flex space-x-2"},ne=["disabled"],re=["disabled"],le=["disabled"],de=["disabled"],ce=["disabled"],me={key:0,class:"mt-4 flex justify-center space-x-4"},ue=["disabled"],ge=["disabled"],ve=["disabled"],xe=["disabled"],he={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ye={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},fe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},be={class:"p-6 lg:p-8"},_e={class:"space-y-2 max-h-96 overflow-y-auto"},ke={class:"flex items-center space-x-3"},we={class:"text-sm font-mono text-gray-500 dark:text-gray-400"},Ge={class:"font-medium text-gray-900 dark:text-gray-100"},pe={class:"text-sm text-gray-600 dark:text-gray-400"},Ae={key:0,class:"text-sm font-bold text-green-600"},Ce={key:0,class:"flex space-x-2"},Se=["onClick"],$e=["onClick"],Te={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-8"},Fe={__name:"LiveScoring",props:{game:Object,liveGame:Object,recentActions:Array,homeRoster:Array,awayRoster:Array,canControl:Boolean},setup(o){const l=o,s=y(!1),m=y(l.liveGame),g=y(l.recentActions||[]),v=k(()=>l.game.status!=="scheduled"),C=k(()=>{if(!m.value)return"Nicht gestartet";const e=m.value.current_period;return e<=l.game.total_periods?`${e}. Viertel`:`Verlängerung ${e-l.game.total_periods}`}),f=e=>{if(!e)return"00:00";const a=e.split(":");return`${a[1]}:${a[2]}`},S=e=>`Q${e.period} ${f(e.time_remaining)}`,$=e=>({field_goal_made:"2-Punkte-Wurf",field_goal_missed:"2-Punkte-Wurf verfehlt",three_point_made:"3-Punkte-Wurf",three_point_missed:"3-Punkte-Wurf verfehlt",free_throw_made:"Freiwurf",free_throw_missed:"Freiwurf verfehlt",rebound_offensive:"Off. Rebound",rebound_defensive:"Def. Rebound",assist:"Assist",steal:"Steal",block:"Block",turnover:"Ballverlust",foul_personal:"Persönliches Foul",foul_technical:"Technisches Foul",substitution_in:"Einwechslung",substitution_out:"Auswechslung"})[e]||e,T=async()=>{s.value=!0;try{await c.post(route("games.start",l.game.id))}catch(e){console.error("Error starting game:",e)}s.value=!1},E=async()=>{if(confirm("Sind Sie sicher, dass Sie das Spiel beenden möchten?")){s.value=!0;try{await c.post(route("games.finish",l.game.id))}catch(e){console.error("Error finishing game:",e)}s.value=!1}},x=async e=>{s.value=!0;try{await c.post(route("games.control-clock",l.game.id),{action:e})}catch(a){console.error("Error controlling clock:",a)}s.value=!1},h=async e=>{s.value=!0;try{await c.post(route("games.timeout",l.game.id),{team:e})}catch(a){console.error("Error starting timeout:",a)}s.value=!1},B=async()=>{s.value=!0;try{await c.delete(route("games.end-timeout",l.game.id))}catch(e){console.error("Error ending timeout:",e)}s.value=!1},b=async e=>{s.value=!0;try{await c.post(route("games.add-action",l.game.id),e)}catch(a){console.error("Error adding action:",a)}s.value=!1},L=async e=>{console.log("Correct action:",e)},R=async e=>{if(confirm("Sind Sie sicher, dass Sie diese Aktion löschen möchten?")){s.value=!0;try{await c.delete(route("games.delete-action",e.id))}catch(a){console.error("Error deleting action:",a)}s.value=!1}};let _=null;return P(()=>{_=j(l.game.id,{onGameStarted:e=>{console.log("Game started:",e),m.value=e.live_game,c.reload({only:["game","liveGame"]})},onGameFinished:e=>{console.log("Game finished:",e),c.reload({only:["game","liveGame"]})},onActionAdded:e=>{console.log("Action added:",e),m.value=e.liveGame,e.action&&(g.value.unshift(e.action),g.value.length>20&&(g.value=g.value.slice(0,20)))},onScoreUpdated:e=>{console.log("Score updated:",e),m.value=e.liveGame},onClockUpdated:e=>{console.log("Clock updated:",e),m.value=e.liveGame},onTimeoutStarted:e=>{console.log("Timeout started:",e),m.value=e.liveGame},onTimeoutEnded:e=>{console.log("Timeout ended:",e),m.value=e.liveGame},onActionCorrected:e=>{console.log("Action corrected:",e);const a=g.value.findIndex(n=>n.id===e.action.id);a!==-1&&(g.value[a]=e.action),m.value=e.liveGame},onActionDeleted:e=>{console.log("Action deleted:",e),g.value=g.value.filter(a=>a.id!==e.actionId),c.reload({only:["liveGame"]})}})}),V(()=>{_&&N(l.game.id)}),(e,a)=>(r(),D(U,{title:"Live Scoring"},{header:w(()=>[t("h2",W," Live Scoring: "+i(o.game.home_team.name)+" vs "+i(o.game.away_team.name),1)]),default:w(()=>[t("div",z,[t("div",I,[t("div",Q,[t("div",q,[t("div",K,[t("div",M,[t("div",H,[t("div",J,i(o.liveGame?.current_score_home||o.game.home_team_score||0),1),t("div",X,i(o.game.home_team.name),1)]),a[6]||(a[6]=t("div",{class:"text-center px-4"},[t("div",{class:"text-lg font-semibold text-gray-500 dark:text-gray-400"},"VS")],-1)),t("div",Y,[t("div",Z,i(o.liveGame?.current_score_away||o.game.away_team_score||0),1),t("div",ee,i(o.game.away_team.name),1)])]),t("div",te,[t("div",ae,i(f(o.liveGame?.period_time_remaining)),1),t("div",oe,i(C.value),1),t("div",se," Shot Clock: "+i(o.liveGame?.shot_clock_remaining||24)+"s ",1)]),t("div",ie,[v.value?u("",!0):(r(),d("button",{key:0,onClick:T,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium",disabled:s.value}," Spiel starten ",8,ne)),v.value&&o.canControl?(r(),d(G,{key:1},[o.liveGame?.period_is_running?(r(),d("button",{key:1,onClick:a[1]||(a[1]=n=>x("pause")),class:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-md text-sm font-medium",disabled:s.value}," ⏸️ Pause ",8,le)):(r(),d("button",{key:0,onClick:a[0]||(a[0]=n=>x("start")),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm font-medium",disabled:s.value}," ▶️ Start ",8,re)),t("button",{onClick:a[2]||(a[2]=n=>x("end_period")),class:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-md text-sm font-medium",disabled:s.value}," ⏹️ Ende ",8,de),o.game.status!=="finished"?(r(),d("button",{key:2,onClick:E,class:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium",disabled:s.value}," 🏁 Beenden ",8,ce)):u("",!0)],64)):u("",!0)])]),v.value&&o.canControl?(r(),d("div",me,[t("button",{onClick:a[3]||(a[3]=n=>h("home")),class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm",disabled:s.value||o.liveGame?.is_in_timeout}," Timeout "+i(o.game.home_team.name)+" ("+i(o.liveGame?.timeouts_home_remaining||5)+") ",9,ue),t("button",{onClick:a[4]||(a[4]=n=>h("away")),class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",disabled:s.value||o.liveGame?.is_in_timeout}," Timeout "+i(o.game.away_team.name)+" ("+i(o.liveGame?.timeouts_away_remaining||5)+") ",9,ge),t("button",{onClick:a[5]||(a[5]=n=>h("official")),class:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",disabled:s.value||o.liveGame?.is_in_timeout}," Offizielles Timeout ",8,ve),o.liveGame?.is_in_timeout?(r(),d("button",{key:0,onClick:B,class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm",disabled:s.value}," Timeout beenden ",8,xe)):u("",!0)])):u("",!0)])])]),v.value?(r(),d("div",he,[t("div",ye,[p(A,{team:o.game.home_team,players:o.homeRoster,side:"home",onAddAction:b,disabled:s.value||!o.liveGame?.period_is_running},null,8,["team","players","disabled"]),p(A,{team:o.game.away_team,players:o.awayRoster,side:"away",onAddAction:b,disabled:s.value||!o.liveGame?.period_is_running},null,8,["team","players","disabled"])]),t("div",fe,[t("div",be,[a[7]||(a[7]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"}," Letzte Aktionen ",-1)),t("div",_e,[(r(!0),d(G,null,O(o.recentActions,n=>(r(),d("div",{key:n.id,class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[t("div",ke,[t("span",we,i(S(n)),1),t("span",Ge,i(n.player?.name||"Unbekannt"),1),t("span",pe,i($(n.action_type)),1),n.points>0?(r(),d("span",Ae," +"+i(n.points),1)):u("",!0)]),o.canControl?(r(),d("div",Ce,[t("button",{onClick:F=>L(n),class:"text-yellow-600 hover:text-yellow-800 text-sm"}," ✏️ Korrigieren ",8,Se),t("button",{onClick:F=>R(n),class:"text-red-600 hover:text-red-800 text-sm"}," 🗑️ Löschen ",8,$e)])):u("",!0)]))),128)),o.recentActions?.length?u("",!0):(r(),d("div",Te," Noch keine Aktionen aufgezeichnet "))])])])])):u("",!0)])]),_:1}))}};export{Fe as default};
