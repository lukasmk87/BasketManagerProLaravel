import{r as V,J as F,q as $,k as q,u as O,s as j,c as D,o as u,w as b,a as e,i as J,b as t,f as a,m as y,d as c,e as T,t as U,F as M,h as A,p as h,g,v as K,z as Z,n as G}from"./app-CoGxkfVc.js";import{_ as W}from"./AppLayout-Drc7lzl4.js";import{_ as B}from"./PrimaryButton-CwuCmxQ7.js";import{_ as z}from"./SecondaryButton-Bp3bKgLC.js";import{_}from"./TextInput-BJ5pfwEC.js";import{_ as n}from"./InputLabel-C_RcxF_l.js";import{_ as d}from"./InputError-o9U-HAWP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"flex justify-between items-center"},I={class:"py-12"},Q={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"md:col-span-2"},ee=["disabled"],se={value:""},oe=["value"],le={key:0,class:"mt-2 p-3 bg-blue-100 border border-blue-400 rounded-md"},ae={key:1,class:"mt-2 p-3 bg-red-100 border border-red-400 rounded-md"},te={class:"text-red-800 text-sm"},ne={key:2,class:"mt-2 p-3 bg-yellow-100 border border-yellow-400 rounded-md"},re={class:"md:col-span-2"},ie={class:"flex items-center"},ue={class:"md:col-span-2"},de={class:"mt-2 space-y-2"},me=["onUpdate:modelValue"],ce={class:"md:col-span-2"},ge={class:"flex items-center justify-end mt-6"},ke={__name:"Create",props:{clubs:{type:Array,default:()=>[]}},setup(N){const r=N,p=V([]),v=V(!1),x=V(null),m=F(),w=$(()=>r.clubs&&Array.isArray(r.clubs)&&r.clubs.length>0?(console.log("Teams Create - Using props clubs:",r.clubs),r.clubs):m.props.clubs&&Array.isArray(m.props.clubs)&&m.props.clubs.length>0?(console.log("Teams Create - Using page props clubs:",m.props.clubs),m.props.clubs):p.value&&Array.isArray(p.value)&&p.value.length>0?(console.log("Teams Create - Using loaded clubs:",p.value),p.value):(console.log("Teams Create - No clubs available"),[])),C=async()=>{if(w.value.length>0)return;console.log("Teams Create - No clubs found in props, using fallback data");const i=[{id:1,name:"Test Basketball Club"},{id:2,name:"Test"}];try{v.value=!0,x.value=null,await new Promise(s=>setTimeout(s,300)),p.value=i,console.log("Teams Create - Using fallback clubs:",i)}catch(s){console.error("Teams Create - Error in fallback:",s),x.value="Fehler beim Laden der Vereine"}finally{v.value=!1}};console.log("Teams Create - Props:",r),console.log("Teams Create - Props Keys:",Object.keys(r)),console.log("Teams Create - Full Props Object:",JSON.stringify(r)),console.log("Teams Create - Page Props:",m.props),console.log("Teams Create - Page Props Clubs:",m.props.clubs),q(()=>{w.value.length===0&&C()});const o=O({name:"",club_id:"",season:"",league:"",division:"",age_group:"",gender:"male",is_active:!0,training_schedule:"[]",description:""}),k=V([]);j(k,i=>{o.training_schedule=JSON.stringify(i)},{deep:!0});const P=()=>{k.value.push({day:"",time:"",location:""})},L=i=>{k.value.splice(i,1)},E=()=>{o.post(route("web.teams.store"))};return(i,s)=>(u(),D(W,{title:"Team erstellen"},{header:b(()=>[e("div",H,[s[10]||(s[10]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Team erstellen ",-1)),t(z,{href:i.route("web.teams.index"),as:"Link"},{default:b(()=>s[9]||(s[9]=[g(" Zurück ",-1)])),_:1,__:[9]},8,["href"])])]),default:b(()=>[e("div",I,[e("div",Q,[e("div",R,[e("form",{onSubmit:J(E,["prevent"]),class:"p-6"},[e("div",X,[e("div",Y,[t(n,{for:"name",value:"Team-Name*"}),t(_,{id:"name",modelValue:a(o).name,"onUpdate:modelValue":s[0]||(s[0]=l=>a(o).name=l),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),t(d,{message:a(o).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[t(n,{for:"club_id",value:"Verein*"}),y(e("select",{id:"club_id","onUpdate:modelValue":s[1]||(s[1]=l=>a(o).club_id=l),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",required:"",disabled:v.value},[e("option",se,U(v.value?"Lade Vereine...":"Verein auswählen"),1),(u(!0),c(M,null,A(w.value,l=>(u(),c("option",{key:l.id,value:l.id},U(l.name),9,oe))),128))],8,ee),[[h,a(o).club_id]]),v.value?(u(),c("div",le,s[11]||(s[11]=[e("p",{class:"text-blue-800 text-sm"},[e("strong",null,"Lade Vereine..."),g(" Bitte warten Sie einen Moment. ")],-1)]))):T("",!0),x.value?(u(),c("div",ae,[e("p",te,[s[12]||(s[12]=e("strong",null,"Fehler:",-1)),g(" "+U(x.value),1)]),e("button",{onClick:C,class:"mt-2 text-sm text-red-600 underline hover:text-red-800"}," Erneut versuchen ")])):T("",!0),!v.value&&!x.value&&w.value.length===0?(u(),c("div",ne,[s[13]||(s[13]=e("p",{class:"text-yellow-800 text-sm"},[e("strong",null,"Keine Vereine verfügbar:"),g(" Es wurden keine aktiven Vereine gefunden. Bitte kontaktieren Sie den Administrator, um einen Verein zu erstellen. ")],-1)),e("button",{onClick:C,class:"mt-2 text-sm text-yellow-600 underline hover:text-yellow-800"}," Erneut laden ")])):T("",!0),t(d,{message:a(o).errors.club_id,class:"mt-2"},null,8,["message"])]),e("div",null,[t(n,{for:"season",value:"Saison*"}),t(_,{id:"season",modelValue:a(o).season,"onUpdate:modelValue":s[2]||(s[2]=l=>a(o).season=l),type:"text",class:"mt-1 block w-full",placeholder:"2023/2024",maxlength:"9",required:""},null,8,["modelValue"]),t(d,{message:a(o).errors.season,class:"mt-2"},null,8,["message"])]),e("div",null,[t(n,{for:"league",value:"Liga"}),t(_,{id:"league",modelValue:a(o).league,"onUpdate:modelValue":s[3]||(s[3]=l=>a(o).league=l),type:"text",class:"mt-1 block w-full",placeholder:"z.B. Bezirksliga"},null,8,["modelValue"]),t(d,{message:a(o).errors.league,class:"mt-2"},null,8,["message"])]),e("div",null,[t(n,{for:"division",value:"Staffel"}),t(_,{id:"division",modelValue:a(o).division,"onUpdate:modelValue":s[4]||(s[4]=l=>a(o).division=l),type:"text",class:"mt-1 block w-full",placeholder:"z.B. Staffel A"},null,8,["modelValue"]),t(d,{message:a(o).errors.division,class:"mt-2"},null,8,["message"])]),e("div",null,[t(n,{for:"age_group",value:"Altersklasse"}),y(e("select",{id:"age_group","onUpdate:modelValue":s[5]||(s[5]=l=>a(o).age_group=l),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},s[14]||(s[14]=[e("option",{value:""},"Altersklasse auswählen",-1),e("option",{value:"u8"},"U8",-1),e("option",{value:"u10"},"U10",-1),e("option",{value:"u12"},"U12",-1),e("option",{value:"u14"},"U14",-1),e("option",{value:"u16"},"U16",-1),e("option",{value:"u18"},"U18",-1),e("option",{value:"u20"},"U20",-1),e("option",{value:"senior"},"Senioren",-1),e("option",{value:"masters"},"Masters",-1),e("option",{value:"veterans"},"Veterans",-1)]),512),[[h,a(o).age_group]]),t(d,{message:a(o).errors.age_group,class:"mt-2"},null,8,["message"])]),e("div",null,[t(n,{for:"gender",value:"Geschlecht*"}),y(e("select",{id:"gender","onUpdate:modelValue":s[6]||(s[6]=l=>a(o).gender=l),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",required:""},s[15]||(s[15]=[e("option",{value:"male"},"Männlich",-1),e("option",{value:"female"},"Weiblich",-1),e("option",{value:"mixed"},"Mixed",-1)]),512),[[h,a(o).gender]]),t(d,{message:a(o).errors.gender,class:"mt-2"},null,8,["message"])]),e("div",re,[e("label",ie,[y(e("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=l=>a(o).is_active=l),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[K,a(o).is_active]]),s[16]||(s[16]=e("span",{class:"ml-2"},"Team ist aktiv",-1))])]),e("div",ue,[t(n,{value:"Trainingszeiten"}),e("div",de,[(u(!0),c(M,null,A(k.value,(l,S)=>(u(),c("div",{key:S,class:"flex items-center gap-2"},[y(e("select",{"onUpdate:modelValue":f=>l.day=f,class:"border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},s[17]||(s[17]=[e("option",{value:""},"Tag wählen",-1),e("option",{value:"monday"},"Montag",-1),e("option",{value:"tuesday"},"Dienstag",-1),e("option",{value:"wednesday"},"Mittwoch",-1),e("option",{value:"thursday"},"Donnerstag",-1),e("option",{value:"friday"},"Freitag",-1),e("option",{value:"saturday"},"Samstag",-1),e("option",{value:"sunday"},"Sonntag",-1)]),8,me),[[h,l.day]]),t(_,{modelValue:l.time,"onUpdate:modelValue":f=>l.time=f,type:"time",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),t(_,{modelValue:l.location,"onUpdate:modelValue":f=>l.location=f,type:"text",placeholder:"Ort",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),t(z,{type:"button",onClick:f=>L(S)},{default:b(()=>s[18]||(s[18]=[g(" Entfernen ",-1)])),_:2,__:[18]},1032,["onClick"])]))),128)),t(B,{type:"button",onClick:P},{default:b(()=>s[19]||(s[19]=[g(" Trainingszeit hinzufügen ",-1)])),_:1,__:[19]})])]),e("div",ce,[t(n,{for:"description",value:"Beschreibung"}),y(e("textarea",{id:"description","onUpdate:modelValue":s[8]||(s[8]=l=>a(o).description=l),rows:"4",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",maxlength:"1000"},null,512),[[Z,a(o).description]]),t(d,{message:a(o).errors.description,class:"mt-2"},null,8,["message"]),s[20]||(s[20]=e("div",{class:"text-xs text-gray-500 mt-1"},"Max. 1000 Zeichen",-1))])]),e("div",ge,[t(B,{class:G({"opacity-25":a(o).processing}),disabled:a(o).processing},{default:b(()=>s[21]||(s[21]=[g(" Team erstellen ",-1)])),_:1,__:[21]},8,["class","disabled"])])],32)])])])]),_:1}))}};export{ke as default};
