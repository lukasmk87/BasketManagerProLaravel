import{J as H,u as _,r as w,d as r,o as a,e as c,b as n,w as s,f as o,g as i,n as v,a as l,F as C,h as T,t as g,j as K}from"./app-CoGxkfVc.js";import{_ as Q}from"./ActionMessage-BDc-IuY5.js";import{_ as z}from"./ActionSection-B6haIIwg.js";import{_ as A}from"./ConfirmationModal-D0eLXsmy.js";import{_ as B}from"./DangerButton-w_lFmDA2.js";import{_ as W}from"./DialogModal-C0QVC45F.js";import{_ as X}from"./FormSection-BXg-tI_I.js";import{_ as P}from"./InputError-o9U-HAWP.js";import{_ as F}from"./InputLabel-C_RcxF_l.js";import{_ as L}from"./PrimaryButton-CwuCmxQ7.js";import{_ as h}from"./SecondaryButton-Bp3bKgLC.js";import{S}from"./SectionBorder-BX-OSva5.js";import{_ as Y}from"./TextInput-BJ5pfwEC.js";import"./SectionTitle-CqO4QQ3r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CLjYKrsc.js";const Z={key:0},ee={class:"col-span-6 sm:col-span-4"},te={key:0,class:"col-span-6 lg:col-span-4"},se={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},oe=["onClick"],le={class:"flex items-center"},ne={key:0,class:"ms-2 size-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},re={class:"mt-2 text-xs text-gray-600 text-start"},ae={key:1},ie={class:"space-y-6"},me={class:"text-gray-600"},de={class:"flex items-center"},ue=["onClick"],ce={key:2},ve={class:"space-y-6"},fe={class:"flex items-center"},be=["src","alt"],ge={class:"ms-4"},ye={class:"flex items-center"},pe=["onClick"],ke={key:1,class:"ms-2 text-sm text-gray-400"},xe=["onClick"],_e={key:0},we={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Ce=["onClick"],Te={class:"flex items-center"},Re={key:0,class:"ms-2 size-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Me={class:"mt-2 text-xs text-gray-600"},De={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(m){const p=m,V=H(),d=_({email:"",role:null}),f=_({role:null}),R=_({}),M=_({}),k=w(!1),$=w(null),x=w(!1),y=w(null),N=()=>{d.post(route("team-members.store",p.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>d.reset()})},O=u=>{K.delete(route("team-invitations.destroy",u),{preserveScroll:!0})},E=u=>{$.value=u,f.role=u.membership.role,k.value=!0},I=()=>{f.put(route("team-members.update",[p.team,$.value]),{preserveScroll:!0,onSuccess:()=>k.value=!1})},U=()=>{x.value=!0},D=()=>{R.delete(route("team-members.destroy",[p.team,V.props.auth.user]))},J=u=>{y.value=u},q=()=>{M.delete(route("team-members.destroy",[p.team,y.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>y.value=null})},j=u=>p.availableRoles.find(e=>e.key===u).name;return(u,e)=>(a(),r("div",null,[m.userPermissions.canAddTeamMembers?(a(),r("div",Z,[n(S),n(X,{onSubmitted:N},{title:s(()=>e[7]||(e[7]=[i(" Add Team Member ",-1)])),description:s(()=>e[8]||(e[8]=[i(" Add a new team member to your team, allowing them to collaborate with you. ",-1)])),form:s(()=>[e[10]||(e[10]=l("div",{class:"col-span-6"},[l("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1)),l("div",ee,[n(F,{for:"email",value:"Email"}),n(Y,{id:"email",modelValue:o(d).email,"onUpdate:modelValue":e[0]||(e[0]=t=>o(d).email=t),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),n(P,{message:o(d).errors.email,class:"mt-2"},null,8,["message"])]),m.availableRoles.length>0?(a(),r("div",te,[n(F,{for:"roles",value:"Role"}),n(P,{message:o(d).errors.role,class:"mt-2"},null,8,["message"]),l("div",se,[(a(!0),r(C,null,T(m.availableRoles,(t,b)=>(a(),r("button",{key:t.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":b>0,"rounded-b-none":b!=Object.keys(m.availableRoles).length-1}]),onClick:G=>o(d).role=t.key},[l("div",{class:v({"opacity-50":o(d).role&&o(d).role!=t.key})},[l("div",le,[l("div",{class:v(["text-sm text-gray-600",{"font-semibold":o(d).role==t.key}])},g(t.name),3),o(d).role==t.key?(a(),r("svg",ne,e[9]||(e[9]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):c("",!0)]),l("div",re,g(t.description),1)],2)],10,oe))),128))])])):c("",!0)]),actions:s(()=>[n(Q,{on:o(d).recentlySuccessful,class:"me-3"},{default:s(()=>e[11]||(e[11]=[i(" Added. ",-1)])),_:1,__:[11]},8,["on"]),n(L,{class:v({"opacity-25":o(d).processing}),disabled:o(d).processing},{default:s(()=>e[12]||(e[12]=[i(" Add ",-1)])),_:1,__:[12]},8,["class","disabled"])]),_:1})])):c("",!0),m.team.team_invitations.length>0&&m.userPermissions.canAddTeamMembers?(a(),r("div",ae,[n(S),n(z,{class:"mt-10 sm:mt-0"},{title:s(()=>e[13]||(e[13]=[i(" Pending Team Invitations ",-1)])),description:s(()=>e[14]||(e[14]=[i(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ",-1)])),content:s(()=>[l("div",ie,[(a(!0),r(C,null,T(m.team.team_invitations,t=>(a(),r("div",{key:t.id,class:"flex items-center justify-between"},[l("div",me,g(t.email),1),l("div",de,[m.userPermissions.canRemoveTeamMembers?(a(),r("button",{key:0,class:"cursor-pointer ms-6 text-sm text-red-500 focus:outline-none",onClick:b=>O(t)}," Cancel ",8,ue)):c("",!0)])]))),128))])]),_:1})])):c("",!0),m.team.users.length>0?(a(),r("div",ce,[n(S),n(z,{class:"mt-10 sm:mt-0"},{title:s(()=>e[15]||(e[15]=[i(" Team Members ",-1)])),description:s(()=>e[16]||(e[16]=[i(" All of the people that are part of this team. ",-1)])),content:s(()=>[l("div",ve,[(a(!0),r(C,null,T(m.team.users,t=>(a(),r("div",{key:t.id,class:"flex items-center justify-between"},[l("div",fe,[l("img",{class:"size-8 rounded-full object-cover",src:t.profile_photo_url,alt:t.name},null,8,be),l("div",ge,g(t.name),1)]),l("div",ye,[m.userPermissions.canUpdateTeamMembers&&m.availableRoles.length?(a(),r("button",{key:0,class:"ms-2 text-sm text-gray-400 underline",onClick:b=>E(t)},g(j(t.membership.role)),9,pe)):m.availableRoles.length?(a(),r("div",ke,g(j(t.membership.role)),1)):c("",!0),u.$page.props.auth.user.id===t.id?(a(),r("button",{key:2,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:U}," Leave ")):m.userPermissions.canRemoveTeamMembers?(a(),r("button",{key:3,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:b=>J(t)}," Remove ",8,xe)):c("",!0)])]))),128))])]),_:1})])):c("",!0),n(W,{show:k.value,onClose:e[2]||(e[2]=t=>k.value=!1)},{title:s(()=>e[17]||(e[17]=[i(" Manage Role ",-1)])),content:s(()=>[$.value?(a(),r("div",_e,[l("div",we,[(a(!0),r(C,null,T(m.availableRoles,(t,b)=>(a(),r("button",{key:t.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":b>0,"rounded-b-none":b!==Object.keys(m.availableRoles).length-1}]),onClick:G=>o(f).role=t.key},[l("div",{class:v({"opacity-50":o(f).role&&o(f).role!==t.key})},[l("div",Te,[l("div",{class:v(["text-sm text-gray-600",{"font-semibold":o(f).role===t.key}])},g(t.name),3),o(f).role==t.key?(a(),r("svg",Re,e[18]||(e[18]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):c("",!0)]),l("div",Me,g(t.description),1)],2)],10,Ce))),128))])])):c("",!0)]),footer:s(()=>[n(h,{onClick:e[1]||(e[1]=t=>k.value=!1)},{default:s(()=>e[19]||(e[19]=[i(" Cancel ",-1)])),_:1,__:[19]}),n(L,{class:v(["ms-3",{"opacity-25":o(f).processing}]),disabled:o(f).processing,onClick:I},{default:s(()=>e[20]||(e[20]=[i(" Save ",-1)])),_:1,__:[20]},8,["class","disabled"])]),_:1},8,["show"]),n(A,{show:x.value,onClose:e[4]||(e[4]=t=>x.value=!1)},{title:s(()=>e[21]||(e[21]=[i(" Leave Team ",-1)])),content:s(()=>e[22]||(e[22]=[i(" Are you sure you would like to leave this team? ",-1)])),footer:s(()=>[n(h,{onClick:e[3]||(e[3]=t=>x.value=!1)},{default:s(()=>e[23]||(e[23]=[i(" Cancel ",-1)])),_:1,__:[23]}),n(B,{class:v(["ms-3",{"opacity-25":o(R).processing}]),disabled:o(R).processing,onClick:D},{default:s(()=>e[24]||(e[24]=[i(" Leave ",-1)])),_:1,__:[24]},8,["class","disabled"])]),_:1},8,["show"]),n(A,{show:y.value,onClose:e[6]||(e[6]=t=>y.value=null)},{title:s(()=>e[25]||(e[25]=[i(" Remove Team Member ",-1)])),content:s(()=>e[26]||(e[26]=[i(" Are you sure you would like to remove this person from the team? ",-1)])),footer:s(()=>[n(h,{onClick:e[5]||(e[5]=t=>y.value=null)},{default:s(()=>e[27]||(e[27]=[i(" Cancel ",-1)])),_:1,__:[27]}),n(B,{class:v(["ms-3",{"opacity-25":o(M).processing}]),disabled:o(M).processing,onClick:q},{default:s(()=>e[28]||(e[28]=[i(" Remove ",-1)])),_:1,__:[28]},8,["class","disabled"])]),_:1},8,["show"])]))}};export{De as default};
