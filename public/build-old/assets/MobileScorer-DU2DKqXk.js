import{r as b,q as $,k as B,Q as E,L as V,R as L,d as r,o as u,a as t,e as f,t as a,i as I,n as A,F as T,h as R,j as _}from"./app-CoGxkfVc.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"min-h-screen bg-gray-900 text-white"},W={class:"sticky top-0 z-50 bg-gray-800 border-b border-gray-700"},H={class:"px-4 py-3"},Q={class:"flex items-center justify-between"},Y={class:"flex items-center space-x-4"},J={class:"text-center"},K={class:"text-2xl font-bold text-blue-400"},X={class:"text-xs text-gray-400 truncate max-w-16"},Z={class:"text-center"},ee={class:"text-2xl font-bold text-red-400"},te={class:"text-xs text-gray-400 truncate max-w-16"},se={class:"text-center"},le={class:"text-xl font-mono font-bold"},oe={class:"text-xs text-gray-400"},ae={class:"text-xs text-yellow-400"},ne={class:"flex space-x-1"},ie=["disabled"],de=["disabled"],re={class:"space-y-2 text-sm"},ue={class:"bg-gray-800 border-b border-gray-700"},ge={class:"flex"},be={class:"flex-1 p-4"},ve={class:"mb-4"},ce={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2"},me=["onClick"],fe={class:"text-lg font-bold"},ye={class:"text-xs truncate w-full text-center"},xe={key:0,class:"mt-2 text-center"},_e={class:"text-lg font-medium"},pe={class:"mb-6"},he={class:"grid grid-cols-3 gap-3"},ke=["disabled"],we=["disabled"],Ce=["disabled"],$e={class:"space-y-4"},Ae={class:"grid grid-cols-3 gap-2"},Ge=["disabled"],Fe=["disabled"],je=["disabled"],Te={class:"grid grid-cols-4 gap-2"},Re=["disabled"],Pe=["disabled"],Se=["disabled"],De=["disabled"],Oe={class:"grid grid-cols-3 gap-2"},ze=["disabled"],Me=["disabled"],qe=["disabled"],Be={class:"bg-gray-800 border-t border-gray-700 max-h-32 overflow-y-auto"},Ee={class:"p-2"},Ve={class:"space-y-1"},Le={key:0,class:"text-green-400 font-bold"},Ie={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4"},Ne={class:"bg-gray-800 rounded-lg p-6 w-full max-w-sm"},Ue={class:"space-y-2"},We={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4"},He={class:"bg-gray-800 rounded-lg p-6 w-full max-w-sm"},Qe={class:"space-y-2"},Ye={__name:"MobileScorer",props:{game:Object,liveGame:Object,recentActions:Array,homeRoster:Array,awayRoster:Array},setup(i){const d=i,o=b(!1),v=b("home"),n=b(""),c=b(!1),y=b(!1),x=b(!1),m=b(d.liveGame),P=b(d.recentActions||[]),G=$(()=>v.value==="home"?d.homeRoster:d.awayRoster),p=$(()=>G.value.find(l=>l.id===n.value)),S=$(()=>{if(!m.value)return"Nicht gestartet";const l=m.value.current_period;return l<=(d.game.total_periods||4)?`${l}. Viertel`:`Verl. ${l-(d.game.total_periods||4)}`}),F=l=>{if(!l)return"00:00";const e=l.split(":");return`${e[1]}:${e[2]}`},D=l=>`Q${l.period} ${F(l.time_remaining)}`,O=l=>({field_goal_made:"2P",three_point_made:"3P",free_throw_made:"FW",rebound_offensive:"Off.Reb",rebound_defensive:"Def.Reb",assist:"Assist",steal:"Steal",block:"Block",turnover:"TO",foul_personal:"Foul"})[l]||l,h=(l,e)=>{g(l,{points:e,is_successful:!0})},g=async(l,e={})=>{if(n.value){o.value=!0;try{const s=v.value==="home"?d.game.home_team_id:d.game.away_team_id;await _.post(route("games.add-action",d.game.id),{player_id:n.value,team_id:s,action_type:l,...e})}catch(s){console.error("Error adding action:",s)}o.value=!1}},k=async l=>{o.value=!0;try{await _.post(route("games.control-clock",d.game.id),{action:l})}catch(e){console.error("Error controlling clock:",e)}o.value=!1},w=async l=>{o.value=!0,x.value=!1;try{await _.post(route("games.timeout",d.game.id),{team:l})}catch(e){console.error("Error starting timeout:",e)}o.value=!1},z=async()=>{if(confirm("Spiel wirklich beenden?")){o.value=!0;try{await _.post(route("games.finish",d.game.id))}catch(l){console.error("Error finishing game:",l)}o.value=!1}},M=()=>{c.value=!1,x.value=!0},q=()=>{y.value=!0},C=l=>{g(l,{foul_type:l.replace("foul_",""),points:0}),y.value=!1};let j=null;return B(()=>{j=E(d.game.id,{onActionAdded:l=>{m.value=l.liveGame,l.action&&P.value.unshift(l.action)},onScoreUpdated:l=>{m.value=l.liveGame},onClockUpdated:l=>{m.value=l.liveGame}})}),V(()=>{j&&L(d.game.id)}),(l,e)=>(u(),r("div",U,[t("div",W,[t("div",H,[t("div",Q,[t("div",Y,[t("div",J,[t("div",K,a(i.liveGame?.current_score_home||0),1),t("div",X,a(i.game.home_team?.short_name||"HOME"),1)]),e[28]||(e[28]=t("div",{class:"text-xs text-gray-500"},"VS",-1)),t("div",Z,[t("div",ee,a(i.liveGame?.current_score_away||0),1),t("div",te,a(i.game.away_team?.short_name||"AWAY"),1)])]),t("div",se,[t("div",le,a(F(i.liveGame?.period_time_remaining)),1),t("div",oe,a(S.value),1),t("div",ae," Shot: "+a(i.liveGame?.shot_clock_remaining||24)+"s ",1)]),t("div",ne,[i.liveGame?.period_is_running?(u(),r("button",{key:1,onClick:e[1]||(e[1]=s=>k("pause")),class:"bg-yellow-600 hover:bg-yellow-700 p-2 rounded",disabled:o.value}," ⏸️ ",8,de)):(u(),r("button",{key:0,onClick:e[0]||(e[0]=s=>k("start")),class:"bg-green-600 hover:bg-green-700 p-2 rounded",disabled:o.value}," ▶️ ",8,ie)),t("button",{onClick:e[2]||(e[2]=s=>c.value=!c.value),class:"bg-gray-600 hover:bg-gray-700 p-2 rounded"}," ⚙️ ")])])])]),c.value?(u(),r("div",{key:0,class:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:e[5]||(e[5]=s=>c.value=!1)},[t("div",{class:"fixed top-16 right-4 bg-gray-800 rounded-lg p-4 shadow-xl",onClick:e[4]||(e[4]=I(()=>{},["stop"]))},[t("div",re,[t("button",{onClick:e[3]||(e[3]=s=>k("end_period")),class:"w-full text-left p-2 hover:bg-gray-700 rounded"}," ⏹️ Viertel beenden "),t("button",{onClick:M,class:"w-full text-left p-2 hover:bg-gray-700 rounded"}," ⏰ Timeout "),t("button",{onClick:z,class:"w-full text-left p-2 hover:bg-gray-700 rounded text-red-400"}," 🏁 Spiel beenden ")])])])):f("",!0),t("div",ue,[t("div",ge,[t("button",{onClick:e[6]||(e[6]=s=>v.value="home"),class:A([v.value==="home"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300","flex-1 py-3 px-4 font-medium text-center"])},a(i.game.home_team?.name||"Home Team"),3),t("button",{onClick:e[7]||(e[7]=s=>v.value="away"),class:A([v.value==="away"?"bg-red-600 text-white":"bg-gray-700 text-gray-300","flex-1 py-3 px-4 font-medium text-center"])},a(i.game.away_team?.name||"Away Team"),3)])]),t("div",be,[t("div",ve,[t("div",ce,[(u(!0),r(T,null,R(G.value,s=>(u(),r("button",{key:s.id,onClick:Je=>n.value=s.id,class:A([n.value===s.id?v.value==="home"?"bg-blue-600":"bg-red-600":"bg-gray-700 hover:bg-gray-600","aspect-square rounded-lg flex flex-col items-center justify-center p-2"])},[t("div",fe,a(s.jersey_number||"?"),1),t("div",ye,a(s.name?.split(" ").pop()||"Player"),1)],10,me))),128))]),p.value?(u(),r("div",xe,[t("span",_e," #"+a(p.value.jersey_number)+" "+a(p.value.name),1)])):f("",!0)]),t("div",pe,[t("div",he,[t("button",{onClick:e[8]||(e[8]=s=>h("free_throw_made",1)),disabled:!n.value||o.value,class:"aspect-square bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-xl flex flex-col items-center justify-center p-4"},e[29]||(e[29]=[t("div",{class:"text-3xl font-bold"},"+1",-1),t("div",{class:"text-xs"},"Freiwurf",-1)]),8,ke),t("button",{onClick:e[9]||(e[9]=s=>h("field_goal_made",2)),disabled:!n.value||o.value,class:"aspect-square bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded-xl flex flex-col items-center justify-center p-4"},e[30]||(e[30]=[t("div",{class:"text-3xl font-bold"},"+2",-1),t("div",{class:"text-xs"},"2-Punkte",-1)]),8,we),t("button",{onClick:e[10]||(e[10]=s=>h("three_point_made",3)),disabled:!n.value||o.value,class:"aspect-square bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 rounded-xl flex flex-col items-center justify-center p-4"},e[31]||(e[31]=[t("div",{class:"text-3xl font-bold"},"+3",-1),t("div",{class:"text-xs"},"3-Punkte",-1)]),8,Ce)])]),t("div",$e,[t("div",null,[e[32]||(e[32]=t("h3",{class:"text-sm font-medium text-gray-300 mb-2"},"Fehlwürfe",-1)),t("div",Ae,[t("button",{onClick:e[11]||(e[11]=s=>g("field_goal_missed",{is_successful:!1})),disabled:!n.value||o.value,class:"bg-red-700 hover:bg-red-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," 2P verfehlt ",8,Ge),t("button",{onClick:e[12]||(e[12]=s=>g("three_point_missed",{is_successful:!1})),disabled:!n.value||o.value,class:"bg-red-700 hover:bg-red-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," 3P verfehlt ",8,Fe),t("button",{onClick:e[13]||(e[13]=s=>g("free_throw_missed",{is_successful:!1})),disabled:!n.value||o.value,class:"bg-red-700 hover:bg-red-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," FW verfehlt ",8,je)])]),t("div",null,[e[33]||(e[33]=t("h3",{class:"text-sm font-medium text-gray-300 mb-2"},"Rebounds & Defense",-1)),t("div",Te,[t("button",{onClick:e[14]||(e[14]=s=>g("rebound_offensive")),disabled:!n.value||o.value,class:"bg-orange-700 hover:bg-orange-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Off. Reb. ",8,Re),t("button",{onClick:e[15]||(e[15]=s=>g("rebound_defensive")),disabled:!n.value||o.value,class:"bg-blue-700 hover:bg-blue-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Def. Reb. ",8,Pe),t("button",{onClick:e[16]||(e[16]=s=>g("steal")),disabled:!n.value||o.value,class:"bg-teal-700 hover:bg-teal-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Steal ",8,Se),t("button",{onClick:e[17]||(e[17]=s=>g("block")),disabled:!n.value||o.value,class:"bg-cyan-700 hover:bg-cyan-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Block ",8,De)])]),t("div",null,[e[34]||(e[34]=t("h3",{class:"text-sm font-medium text-gray-300 mb-2"},"Sonstiges",-1)),t("div",Oe,[t("button",{onClick:e[18]||(e[18]=s=>g("assist")),disabled:!n.value||o.value,class:"bg-indigo-700 hover:bg-indigo-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Assist ",8,ze),t("button",{onClick:e[19]||(e[19]=s=>g("turnover")),disabled:!n.value||o.value,class:"bg-yellow-700 hover:bg-yellow-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Ballverlust ",8,Me),t("button",{onClick:q,disabled:!n.value||o.value,class:"bg-red-700 hover:bg-red-600 disabled:bg-gray-600 py-3 rounded-lg text-sm"}," Foul ",8,qe)])])])]),t("div",Be,[t("div",Ee,[e[35]||(e[35]=t("div",{class:"text-xs text-gray-400 mb-1"},"Letzte Aktionen:",-1)),t("div",Ve,[(u(!0),r(T,null,R(i.recentActions.slice(0,3),s=>(u(),r("div",{key:s.id,class:"flex justify-between items-center text-xs"},[t("span",null,a(D(s))+" • "+a(s.player?.name)+" • "+a(O(s.action_type)),1),s.points>0?(u(),r("span",Le," +"+a(s.points),1)):f("",!0)]))),128))])])]),y.value?(u(),r("div",Ie,[t("div",Ne,[e[36]||(e[36]=t("h3",{class:"text-lg font-bold mb-4"},"Foul-Art auswählen",-1)),t("div",Ue,[t("button",{onClick:e[20]||(e[20]=s=>C("foul_personal")),class:"w-full text-left bg-gray-700 hover:bg-gray-600 p-3 rounded"}," Persönliches Foul "),t("button",{onClick:e[21]||(e[21]=s=>C("foul_technical")),class:"w-full text-left bg-gray-700 hover:bg-gray-600 p-3 rounded"}," Technisches Foul "),t("button",{onClick:e[22]||(e[22]=s=>C("foul_offensive")),class:"w-full text-left bg-gray-700 hover:bg-gray-600 p-3 rounded"}," Offensiv Foul ")]),t("button",{onClick:e[23]||(e[23]=s=>y.value=!1),class:"w-full mt-4 bg-gray-600 hover:bg-gray-500 text-white py-2 rounded"}," Abbrechen ")])])):f("",!0),x.value?(u(),r("div",We,[t("div",He,[e[37]||(e[37]=t("h3",{class:"text-lg font-bold mb-4"},"Timeout",-1)),t("div",Qe,[t("button",{onClick:e[24]||(e[24]=s=>w("home")),class:"w-full text-left bg-blue-700 hover:bg-blue-600 p-3 rounded"},a(i.game.home_team?.name)+" ("+a(i.liveGame?.timeouts_home_remaining||5)+") ",1),t("button",{onClick:e[25]||(e[25]=s=>w("away")),class:"w-full text-left bg-red-700 hover:bg-red-600 p-3 rounded"},a(i.game.away_team?.name)+" ("+a(i.liveGame?.timeouts_away_remaining||5)+") ",1),t("button",{onClick:e[26]||(e[26]=s=>w("official")),class:"w-full text-left bg-gray-700 hover:bg-gray-600 p-3 rounded"}," Offizielles Timeout ")]),t("button",{onClick:e[27]||(e[27]=s=>x.value=!1),class:"w-full mt-4 bg-gray-600 hover:bg-gray-500 text-white py-2 rounded"}," Abbrechen ")])])):f("",!0)]))}},Ze=N(Ye,[["__scopeId","data-v-306926b6"]]);export{Ze as default};
