import{d as o,o as s,a as e,H as F,r as y,b as m,f as g,t as a,e as d,i as K,F as k,h as N,m as p,z as C,n as h,g as _,I as E,c as I,D as L,j as M}from"./app-CoGxkfVc.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as S}from"./ExclamationTriangleIcon-AgrX6-ml.js";import{r as x,a as H,b as R}from"./UserGroupIcon-C6Pz1vw4.js";import{r as $}from"./InformationCircleIcon-07dZw5fj.js";import{r as Z}from"./ShieldExclamationIcon-WHmaSqzf.js";function q(i,b){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}const T={class:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50"},U={class:"emergency-header"},O={class:"container mx-auto px-4 py-6"},P={class:"flex items-center justify-between"},W={class:"flex items-center gap-3"},G={class:"emergency-icon"},J={class:"text-sm text-gray-600"},Q={class:"emergency-numbers"},X={class:"container mx-auto px-4 py-8"},Y={key:0,class:"instructions-card mb-6"},ee={class:"flex items-start gap-3"},te={class:"instruction-text"},se={key:1,class:"emergency-contact-info mb-6"},re={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},oe={class:"flex items-center justify-between"},ne={class:"text-blue-800 font-medium"},le={class:"text-blue-600 text-sm"},ae={key:2,class:"access-form-card"},ie={class:"form-group"},ce={class:"urgency-grid"},de=["value"],ue={class:"urgency-content"},me={class:"urgency-title"},ge={class:"urgency-description"},ve={key:0,class:"error-text"},fe={key:0,class:"form-group"},be={key:0,class:"error-text"},ye={class:"form-group"},pe={key:0,class:"error-text"},he={class:"form-actions"},_e=["disabled"],xe={key:0,class:"flex items-center gap-2"},we={key:1,class:"flex items-center gap-2"},ke={class:"flex items-center gap-2"},Ne={key:3,class:"processing-card"},Ce={class:"emergency-numbers-card mt-8"},Se={class:"emergency-numbers-grid"},$e=["onClick"],Be={class:"flex items-center justify-between"},ze={class:"service-name"},Ve={class:"service-number"},je={__name:"AccessForm",props:{accessKey:String,teamName:String,clubName:String,requiresReason:{type:Boolean,default:!1},usageInstructions:String,emergencyContact:{type:Object,default:()=>({})},emergencyNumbers:{type:Object,default:()=>({ambulance:"112",fire:"112",police:"110"})}},setup(i){const b=i,l=F({urgency_level:"",reason:"",contact_person:""}),c=y({}),u=y(!1),v=y(!1),B=[{value:"critical",title:"Kritisch",description:"Lebensbedrohliche Situation",icon:S,color:"text-red-600 bg-red-100"},{value:"high",title:"Hoch",description:"Schwere Verletzung/Notfall",icon:R,color:"text-orange-600 bg-orange-100"},{value:"medium",title:"Mittel",description:"Medizinische Aufmerksamkeit nötig",icon:Z,color:"text-yellow-600 bg-yellow-100"},{value:"low",title:"Niedrig",description:"Kontaktaufnahme erforderlich",icon:$,color:"text-blue-600 bg-blue-100"}],z=async()=>{if(!l.urgency_level){c.value={urgency_level:"Bitte wählen Sie eine Dringlichkeitsstufe aus."};return}u.value=!0,v.value=!0,c.value={};try{M.post(route("emergency.access.process",b.accessKey),l,{onSuccess:()=>{},onError:n=>{c.value=n,u.value=!1,v.value=!1}})}catch(n){console.error("Emergency access error:",n),u.value=!1,v.value=!1,c.value={general:"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut."}}},V=()=>{window.location.href=route("emergency.access.direct",b.accessKey)},w=n=>{navigator.vibrate&&navigator.vibrate([200,100,200]),window.location.href=`tel:${n}`},j=n=>{n&&(navigator.vibrate&&navigator.vibrate([100,50,100]),window.location.href=`tel:${n.replace(/\s/g,"")}`)},D=n=>({ambulance:"Rettungsdienst",fire:"Feuerwehr",police:"Polizei"})[n]||n;return(n,t)=>(s(),o("div",T,[e("div",U,[e("div",O,[e("div",P,[e("div",W,[e("div",G,[m(g(S),{class:"w-8 h-8 text-red-600"})]),e("div",null,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Notfallzugriff",-1)),e("p",J,a(i.teamName),1)])]),e("div",Q,[e("button",{onClick:t[0]||(t[0]=r=>w("112")),class:"emergency-number-btn"},[m(g(x),{class:"w-5 h-5"}),t[6]||(t[6]=e("span",null,"112",-1))])])])])]),e("div",X,[v.value?d("",!0):(s(),o("div",Y,[e("div",ee,[m(g($),{class:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e("div",null,[t[7]||(t[7]=e("h3",{class:"font-semibold text-gray-900 mb-2"},"Wichtige Hinweise",-1)),e("div",te,a(i.usageInstructions),1),t[8]||(t[8]=e("div",{class:"mt-3 text-sm text-gray-600"},[e("p",null,[e("strong",null,"Bei lebensbedrohlichen Notfällen sofort 112 anrufen!")])],-1))])])])),i.emergencyContact.person?(s(),o("div",se,[e("div",re,[t[9]||(t[9]=e("h3",{class:"font-semibold text-blue-900 mb-2"},"Team-Notfallkontakt",-1)),e("div",oe,[e("div",null,[e("p",ne,a(i.emergencyContact.person),1),e("p",le,a(i.emergencyContact.phone),1)]),e("button",{onClick:t[1]||(t[1]=r=>j(i.emergencyContact.phone)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[m(g(x),{class:"w-5 h-5"})])])])])):d("",!0),v.value?d("",!0):(s(),o("div",ae,[e("form",{onSubmit:K(z,["prevent"]),class:"space-y-6"},[e("div",ie,[t[10]||(t[10]=e("label",{class:"form-label required"}," Dringlichkeitsstufe ",-1)),e("div",ce,[(s(),o(k,null,N(B,r=>e("label",{key:r.value,class:h(["urgency-option",{selected:l.urgency_level===r.value}])},[p(e("input",{type:"radio",value:r.value,"onUpdate:modelValue":t[2]||(t[2]=f=>l.urgency_level=f),class:"sr-only"},null,8,de),[[E,l.urgency_level]]),e("div",ue,[e("div",{class:h(["urgency-icon",r.color])},[(s(),I(L(r.icon),{class:"w-6 h-6"}))],2),e("div",null,[e("div",me,a(r.title),1),e("div",ge,a(r.description),1)])])],2)),64))]),c.value.urgency_level?(s(),o("div",ve,a(c.value.urgency_level),1)):d("",!0)]),i.requiresReason?(s(),o("div",fe,[t[11]||(t[11]=e("label",{for:"reason",class:"form-label"}," Grund für den Zugriff (optional) ",-1)),p(e("textarea",{id:"reason","onUpdate:modelValue":t[3]||(t[3]=r=>l.reason=r),class:"form-textarea",rows:"3",placeholder:"Kurze Beschreibung der Situation..."},null,512),[[C,l.reason]]),c.value.reason?(s(),o("div",be,a(c.value.reason),1)):d("",!0)])):d("",!0),e("div",ye,[t[12]||(t[12]=e("label",{for:"contact_person",class:"form-label"}," Ihr Name (optional) ",-1)),p(e("input",{type:"text",id:"contact_person","onUpdate:modelValue":t[4]||(t[4]=r=>l.contact_person=r),class:"form-input",placeholder:"Name der Person, die Zugriff benötigt"},null,512),[[C,l.contact_person]]),c.value.contact_person?(s(),o("div",pe,a(c.value.contact_person),1)):d("",!0)]),e("div",he,[e("button",{type:"submit",class:h(["submit-btn",{processing:u.value}]),disabled:u.value||!l.urgency_level},[u.value?(s(),o("span",we,t[14]||(t[14]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),_(" Wird verarbeitet... ",-1)]))):(s(),o("span",xe,[m(g(H),{class:"w-5 h-5"}),t[13]||(t[13]=_(" Notfallkontakte anzeigen ",-1))]))],10,_e),l.urgency_level==="critical"?(s(),o("button",{key:0,onClick:V,type:"button",class:"direct-access-btn"},[e("span",ke,[m(g(q),{class:"w-5 h-5"}),t[15]||(t[15]=_(" Direktzugriff (Kritischer Notfall) ",-1))])])):d("",!0)])],32)])),v.value&&u.value?(s(),o("div",Ne,t[16]||(t[16]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Zugriff wird verarbeitet..."),e("p",{class:"text-gray-600"},"Notfallkontakte werden geladen.")],-1)]))):d("",!0),e("div",Ce,[t[17]||(t[17]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Notrufnummern",-1)),e("div",Se,[(s(!0),o(k,null,N(i.emergencyNumbers,(r,f)=>(s(),o("button",{key:f,onClick:De=>w(r),class:"emergency-number-card"},[e("div",Be,[e("div",null,[e("div",ze,a(D(f)),1),e("div",Ve,a(r),1)]),m(g(x),{class:"w-6 h-6 text-red-600"})])],8,$e))),128))])])])]))}},Ae=A(je,[["__scopeId","data-v-5695cf3e"]]);export{Ae as default};
