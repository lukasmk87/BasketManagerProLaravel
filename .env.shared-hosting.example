# =============================================================================
# SHARED HOSTING ENVIRONMENT CONFIGURATION
# =============================================================================
# This template is optimized for shared hosting environments (e.g., KAS Server,
# 1&1/IONOS, Strato, HostEurope) where Redis is not available.
#
# Usage:
# 1. Copy this file to .env: cp .env.shared-hosting.example .env
# 2. Update database credentials and other settings below
# 3. Run: php artisan key:generate
# 4. Run: php artisan config:clear
# 5. Run: php artisan migrate
#
# Features:
# - Uses database-based cache (no Redis required)
# - Uses database-based sessions
# - Uses database-based queue
# - File-based logging
# - Optimized for shared hosting limitations
# =============================================================================

APP_NAME="BasketManager Pro"
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=https://your-domain.com
APP_TIMEZONE=Europe/Berlin

APP_LOCALE=de
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=de_DE

APP_MAINTENANCE_DRIVER=file

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Update these with your shared hosting database credentials
DB_CONNECTION=mysql
DB_HOST=your-database-host.kasserver.com
DB_PORT=3306
DB_DATABASE=your_database_name
DB_USERNAME=your_database_user
DB_PASSWORD=your_database_password

# =============================================================================
# SESSION CONFIGURATION (Database-based, no Redis)
# =============================================================================
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# IMPORTANT: For HTTPS (production)
SESSION_SECURE_COOKIE=true
SESSION_SAME_SITE=lax
SESSION_HTTP_ONLY=true
SESSION_PARTITIONED_COOKIE=false

# =============================================================================
# CACHE CONFIGURATION (Database-based, no Redis)
# =============================================================================
CACHE_STORE=database
CACHE_PREFIX=bmp_

# =============================================================================
# QUEUE CONFIGURATION (Database-based, no Redis)
# =============================================================================
QUEUE_CONNECTION=database

# NOTE: On shared hosting, you'll need to set up a cron job to process queues:
# * * * * * cd /path/to/your/project && php artisan queue:work --stop-when-empty --tries=3 >> /dev/null 2>&1

# =============================================================================
# BROADCASTING (Log-based, no Redis/Pusher required for basic operation)
# =============================================================================
BROADCAST_CONNECTION=log

# Optional: If you want real-time features, configure Pusher:
# BROADCAST_CONNECTION=pusher
# PUSHER_APP_ID=your-app-id
# PUSHER_APP_KEY=your-app-key
# PUSHER_APP_SECRET=your-app-secret
# PUSHER_APP_CLUSTER=eu

# =============================================================================
# FILESYSTEM
# =============================================================================
FILESYSTEM_DISK=local

# =============================================================================
# REDIS (Not used on shared hosting, but kept for compatibility)
# =============================================================================
# These settings are ignored since we're using database drivers
# The app will automatically detect Redis is unavailable and use database fallbacks
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# =============================================================================
# MAIL CONFIGURATION
# =============================================================================
# Configure with your shared hosting email settings
MAIL_MAILER=smtp
MAIL_HOST=smtp.your-provider.com
MAIL_PORT=587
MAIL_USERNAME=your-email@your-domain.com
MAIL_PASSWORD=your-email-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@your-domain.com"
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# STRIPE CONFIGURATION (for subscriptions and payments)
# =============================================================================
# Use LIVE keys for production
STRIPE_KEY=pk_live_...
STRIPE_SECRET=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_WEBHOOK_SECRET_CLUB=whsec_...

# Vite Stripe Configuration (Frontend)
VITE_STRIPE_KEY="${STRIPE_KEY}"

# =============================================================================
# MULTI-TENANT CONFIGURATION
# =============================================================================
TENANT_IDENTIFICATION=domain  # Options: domain, subdomain, slug
TENANT_DOMAIN_SUFFIX=.your-main-domain.com  # For subdomain mode

# Initial Tenant Setup (for first installation)
# These values are used by: php artisan tenant:initialize --force
# or: php artisan db:seed --class=InitialTenantSeeder
TENANT_NAME="BasketManager Pro"
TENANT_BILLING_EMAIL=admin@your-domain.com
TENANT_SUBSCRIPTION_TIER=professional  # Options: free, basic, professional, enterprise
TENANT_COUNTRY=DE
TENANT_CURRENCY=EUR
TENANT_TRIAL_DAYS=30  # Optional: Add trial period

# Optional Branding
TENANT_PRIMARY_COLOR=#4F46E5
TENANT_LOGO_URL=
TENANT_SUPPORT_EMAIL=support@your-domain.com
TENANT_PHONE=

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Force HTTPS in production
FORCE_HTTPS=true

# Content Security Policy
CSP_ENABLED=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
# Query caching (uses database cache)
QUERY_CACHE_ENABLED=true
QUERY_CACHE_TTL=3600

# =============================================================================
# AWS (Optional - for S3 storage)
# =============================================================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-central-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# =============================================================================
# MONITORING & ERROR TRACKING
# =============================================================================
# Optional: Sentry for error tracking
SENTRY_LARAVEL_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# VITE CONFIGURATION
# =============================================================================
VITE_APP_NAME="${APP_NAME}"

# =============================================================================
# IMPORTANT SHARED HOSTING NOTES
# =============================================================================
# 1. CRON JOB SETUP:
#    Add this to your cron jobs (runs every minute):
#    * * * * * cd /www/htdocs/your-path/your-domain && php artisan schedule:run >> /dev/null 2>&1
#
# 2. QUEUE WORKER SETUP:
#    Add this to your cron jobs (runs every 5 minutes):
#    */5 * * * * cd /www/htdocs/your-path/your-domain && php artisan queue:work --stop-when-empty --tries=3 --timeout=60 >> /dev/null 2>&1
#
# 3. STORAGE PERMISSIONS:
#    Ensure storage/ and bootstrap/cache/ are writable:
#    chmod -R 755 storage bootstrap/cache
#
# 4. SYMBOLIC LINK:
#    Create storage symlink:
#    php artisan storage:link
#
# 5. CONFIG CACHE (for better performance):
#    php artisan config:cache
#    php artisan route:cache
#    php artisan view:cache
#
# 6. DATABASE MIGRATIONS:
#    php artisan migrate --force
#    php artisan db:seed --force (if needed)
#
# =============================================================================
